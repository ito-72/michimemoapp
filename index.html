<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>位置情報POSTテスト</title>
</head>
<body>
  <h1>現在地をサーバーにPOST</h1>

  <button id="postButton">現在地を送信</button>

  <div id="resultArea">← ここにサーバーからの返答が出る</div>

  <script>
    document.getElementById("postButton").addEventListener("click", async () => {
      const resultArea = document.getElementById("resultArea");

      if (!navigator.geolocation) {
        resultArea.textContent = "このブラウザでは位置情報が使えません。";
        return;
      }

      navigator.geolocation.getCurrentPosition(
        async (pos) => {
          const lat = pos.coords.latitude;
          const lng = pos.coords.longitude;

          // サーバーにPOST送信
          const res = await fetch("/api/recordLocation", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ lat, lng })
          });

          const result = await res.json();
          resultArea.textContent = `サーバー返答: ${result.message}`;
        },
        (err) => {
          resultArea.textContent = `位置情報の取得に失敗: ${err.message}`;
        }
      );
    });
  </script>
</body>
</html>
